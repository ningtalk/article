

## 索引结构
索引的作用是提高查询效率。常见的三种数据结构：
* 哈希表
一种以键-值存储数据的结构。  
由于key值经过哈希函数对应在数组中的位置是无序的，所以使用此数据结构创建索引时做区间查询的速度是较慢的。  
哈希表这种结构适用于等值查询的场景。  
* 有序数组
在等值查询和区间查询场景中的性能都非常优秀，但在中间插入数据的成本太高（需要移动后面的所有记录）。  
有序数组索引适用于静态存储，比如要保存2016年某城市的所有人口信息，这个数据不会再修改。  
* 搜索树
二叉搜索树的特点：每个节点的左儿子点小于父节点，父节点小于右儿子节点。  
平衡二叉树  
N叉树，磁盘存储  
## InnoDB索引结构
InnoDB使用了B+树索引模型  
* 主键索引和普通索引区别？  
因为主键索引的搜索树的叶子节点上存储的是整行数据，普通索引（非主键索引）的搜索树上的叶子节点上存储的是主键的值，所以基于非主键索引的查询需要多扫描一棵索引树（这个过程称为**回表**）,
所以在实际应用中应该优先使用主键查询。  

## 索引维护
B+树为了维护索引的**有序性**，在插入新值时需要做必要的维护，此过程会对性能有影响。  
页分裂\页合并  

## 索引覆盖
```mysql
create table T(
id int primary key, 
k int not null, 
name varchar(16),
index (k))engine=InnoDB;
```
执行语句select id from T where k = 4,只需查询id，id的值已经在索引树上，此时不用回表。在这里索引K已经覆盖了查询需求，成为覆盖索引。  
覆盖索引可以减少索引树的查询，能显著提高性能，是常见的性能优化手段。

对联合索引(col1,col2,col3)，如果有如下的sql: select col1,col2,col3 from test where col1=1 and col2=2，也会覆盖索引。    

## 最左前缀原则
在mysql建立联合索引时会遵循最左前缀匹配的原则，即最左优先，在检索数据时从联合索引的最左边开始匹配。  
这篇文章介绍的清晰：https://segmentfault.com/a/1190000015416513  

## 联合索引的优点与缺点

## 结论
* 主键长度越小，普通索引的叶子节点就越小，普通索引占用的空间也就越小。  

